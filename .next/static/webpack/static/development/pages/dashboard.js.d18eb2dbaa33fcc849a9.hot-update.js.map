{"version":3,"file":"static/webpack/static/development/pages/dashboard.js.d18eb2dbaa33fcc849a9.hot-update.js","sources":["webpack:///./components/Dashboard/DashMain.js"],"sourcesContent":["import React, { setState } from \"react\";\nimport { Query } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { withRouter } from \"next/router\";\nconst dateformat = require(\"dateformat\");\n\nexport default class DashMain extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { term: this.props.initialTerm };\n  }\n  componentDidMount() {}\n\n  componentWillReceiveProps(nextProps) {\n    console.log(nextProps.initialTerm);\n    if (nextProps.initialTerm !== this.state.term) {\n      this.setState({ term: nextProps.initialTerm });\n    }\n  }\n\n  render() {\n    if (!this.state.term) {\n      return <div>loading</div>;\n    } else {\n      const fetchTweetsVars = {\n        query: this.state.term\n      };\n      console.log(fetchTweetsVars);\n      return (\n        <Query query={fetchTweetsQuery} variables={fetchTweetsVars}>\n          {({ loading, error, data }) => {\n            if (error)\n              return (\n                <div>\n                  no data loaded.. there may have been an error please refresh\n                  the page\n                </div>\n              );\n            if (loading) return <div>Loading</div>;\n            console.log(data.getDailyTweet);\n            let pos =\n              (data.getDailyTweet.positive / data.getDailyTweet.total) * 100;\n            let neg =\n              (data.getDailyTweet.negative / data.getDailyTweet.total) * 100;\n            let trans = 140 - pos;\n            console.log(pos, neg);\n\n            return (\n              <div className=\"dash-main-table\">\n                <div>\n                  <table>\n                    <thread>\n                      <tr className=\"top-row\">\n                        <th className=\"tr-heading\">\n                          query: {this.props.initialTerm}\n                        </th>\n                        <th className=\"bar-heading tr-heading\">\n                          <svg\n                            class=\"chart\"\n                            width=\"450\"\n                            height=\"40\"\n                            aria-labelledby=\"title desc\"\n                            role=\"img\"\n                          >\n                            <g class=\"bar\" transform=\"translate(140,4)\">\n                              <rect width={neg} height=\"19\" className=\"rect1\" />\n                              <text\n                                x={neg + 5}\n                                y=\"9.5\"\n                                dy=\".35em\"\n                                className=\"texto\"\n                              >\n                                {parseInt(neg)}%\n                              </text>\n                              <text\n                                x=\"130\"\n                                y=\"9.5\"\n                                dy=\".35em\"\n                                className=\"texto\"\n                              >\n                                24 hour sentiment\n                              </text>\n                            </g>\n                            <g class=\"bar2\" transform={`translate(${trans},4)`}>\n                              <rect width={pos} height=\"19\" className=\"rect2\" />\n\n                              <text\n                                x=\"-35\"\n                                y=\"9.5\"\n                                dy=\".35em\"\n                                className=\"texto\"\n                              >\n                                {parseInt(pos)}%\n                              </text>\n                            </g>\n                          </svg>\n                        </th>\n                      </tr>\n                    </thread>\n                    <tbody>\n                      <div>\n                        {data.fetchTweets.map(tweet => (\n                          <tr className={`data`}>\n                            <th\n                              scope=\"row\"\n                              className={`hdata-${tweet.polarity}`}\n                            >\n                              {dateformat(tweet.timestamp, \"shortTime\")}\n                            </th>\n                            <td className={`tdata-${tweet.polarity}`}>\n                              {tweet.text}\n                            </td>\n                          </tr>\n                        ))}\n                      </div>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            );\n          }}\n        </Query>\n      );\n    }\n  }\n}\n\nexport const fetchTweetsQuery = gql`\n  query fetchTweets($query: String!) {\n    fetchTweets(query: $query) {\n      id\n      timestamp\n      tweetId\n      text\n      polarity\n    }\n\n    getDailyTweet(query: $query) {\n      day\n      negative\n      positive\n      total\n    }\n  }\n`;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAAA;AAAA;AAFA;AAGA;AACA;;;AAAA;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AARA;AAmBA;AAGA;AACA;;;;AAtHA;AACA;AADA;AAyHA;;;;A","sourceRoot":""}