{"version":3,"file":"static/webpack/static/development/pages/login.js.8f5cd218f587dbd3f4f9.hot-update.js","sources":["webpack:///./components/LoginForm.js"],"sourcesContent":["import React, { useContext } from \"react\";\nimport { ApolloConsumer } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport Router from \"next/router\";\nimport { Alert } from \"reactstrap\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { observer } from \"mobx-react-lite\";\nimport { UserStoreContext } from \"../stores/UserStore.ts\";\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { wrongCredentials: false };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  async handleSubmit(event, client) {\n    event.preventDefault();\n    const form = event.target;\n    const formData = new window.FormData(form);\n    const email = formData.get(\"email\");\n    const password = formData.get(\"password\");\n    form.reset();\n\n    let res = client.mutate({\n      mutation: gql`\n        mutation login($email: String!, $password: String!) {\n          login(email: $email, password: $password)\n        }\n      `,\n      variables: { email, password }\n    });\n\n    const userStore = UserStoreContext;\n    console.log(userStore);\n\n    let r = await res;\n    console.log(r);\n    r = r.data.login;\n    console.log(r);\n    let isTrue = r == \"true\";\n    console.log(typeof r);\n    if (isTrue == true) {\n      console.log(r);\n      Router.push(\"/dashboard\");\n    } else {\n      this.setState({ wrongCredentials: true });\n      return;\n    }\n  }\n\n  render() {\n    return (\n      <ApolloConsumer>\n        {client => (\n          <form onSubmit={event => this.handleSubmit(event, client)}>\n            <h1>Login</h1>\n            <input placeholder=\"email\" name=\"email\" type=\"text\" required />\n            <input\n              placeholder=\"password\"\n              name=\"password\"\n              type=\"text\"\n              required\n            />\n            <button type=\"submit\">Submit</button>\n            {this.state.wrongCredentials == true ? (\n              <div className=\"login-alert\">\n                <Alert\n                  color=\"secondary\"\n                  isOpen={this.state.wrongCredentials == true ? true : false}\n                >\n                  Wrong login credentials\n                </Alert>\n              </div>\n            ) : null}\n          </form>\n        )}\n      </ApolloConsumer>\n    );\n  }\n}\n\nexport default LoginForm;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAHA;AAIA;AACA;;;;;;AACA;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAKA;AAAA;AAAA;AAAA;AANA;AASA;AACA;;AAEA;AACA;;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;AACA;AACA;;;;;AAEA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;AAKA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAbA;AAyBA;;;;AAtEA;AACA;AAwEA;;;;A","sourceRoot":""}