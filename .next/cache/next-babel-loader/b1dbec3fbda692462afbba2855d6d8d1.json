{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/manx/projects-2/bitsjournal/frontend/components/Stripe/CheckoutForm.js\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n              mutation confCard($uid: String!, $source: String!) {\\n                confirmCard(uid: $uid, source: $source)\\n              }\\n            \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n// CheckoutForm.js\nimport React from \"react\";\nimport { injectStripe, CardElement } from \"react-stripe-elements\";\nimport { ApolloConsumer } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components\";\nimport Button from \"../shared/Button\";\nimport FormWrapper from \"../form/FormWrapper\";\nimport { smallFont } from \"../shared/helpers\";\nimport register from \"../../pages/register\";\nimport { removeArgumentsFromDocument } from \"apollo-utilities\";\nimport Router from \"next/router\";\n\nvar Cookie = require(\"js-cookie\");\n\nfunction CheckoutForm(_ref) {\n  var _this = this;\n\n  var stripe = _ref.stripe;\n\n  function handleSubmit(ev, client) {\n    ev.preventDefault();\n    var source;\n    var uid = Cookie.get(\"uid\");\n    stripe.createSource({\n      type: \"card\",\n      owner: {\n        email: \"jacobzadelman@gmail.com\"\n      }\n    }).then(function (_ref2) {\n      var source = _ref2.source;\n      return source.id.toString();\n    }).then( /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(source) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return client.mutate({\n                  mutation: gql(_templateObject()),\n                  variables: {\n                    uid: uid,\n                    source: source\n                  }\n                }).then(function (res) {\n                  Cookie.set(\"isAuth\", \"true\");\n                  Router.push(\"/dashboard\");\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n  }\n\n  return __jsx(ApolloConsumer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, function (client) {\n    return __jsx(FormWrapper, {\n      style: {\n        marginTop: \"20vw\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }\n    }, __jsx(StyledForm, {\n      onSubmit: function onSubmit(e) {\n        return handleSubmit(e, client);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }\n    }, __jsx(\"label\", {\n      style: {\n        width: \"100%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }\n    }, __jsx(CardElement, {\n      style: {\n        base: {\n          fontSize: \"18px\"\n        }\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 15\n      }\n    })), __jsx(\"div\", {\n      style: {\n        display: \"flex\",\n        width: \"100%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }\n    }, __jsx(SubmitButton, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 15\n      }\n    }, \"Start your free trial\")), __jsx(\"div\", {\n      style: {\n        display: \"flex\",\n        width: \"100%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    }, __jsx(NoteDiv, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 15\n      }\n    }, \"*free for 7 days then $29USD/month\"))));\n  });\n}\n\n_c = CheckoutForm;\nexport default _c2 = injectStripe(CheckoutForm);\nvar NoteDiv = styled.div.withConfig({\n  displayName: \"CheckoutForm__NoteDiv\",\n  componentId: \"sc-53t4o-0\"\n})([\"\", \" font-size:11px;margin:auto;margin-top:7px;\"], smallFont);\n_c3 = NoteDiv;\nvar StyledForm = styled.form.withConfig({\n  displayName: \"CheckoutForm__StyledForm\",\n  componentId: \"sc-53t4o-1\"\n})([\"display:flex;flex-direction:column;align-items:flex-start;width:100%;\", \";\"], function (props) {\n  return props.loading && \"filter: grayscale(0.5) blur(5px) opacity(0.6); pointer-events: none\";\n});\n_c4 = StyledForm;\nvar SubmitButton = styled(Button).withConfig({\n  displayName: \"CheckoutForm__SubmitButton\",\n  componentId: \"sc-53t4o-2\"\n})([\"margin:auto;margin-top:20px;background-color:#333333;\"]);\n_c5 = SubmitButton;\nvar InputWrapper = styled.div.withConfig({\n  displayName: \"CheckoutForm__InputWrapper\",\n  componentId: \"sc-53t4o-3\"\n})([\"position:relative;margin-bottom:24px;width:100%;\"]);\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"CheckoutForm\");\n$RefreshReg$(_c2, \"%default%\");\n$RefreshReg$(_c3, \"NoteDiv\");\n$RefreshReg$(_c4, \"StyledForm\");\n$RefreshReg$(_c5, \"SubmitButton\");","map":{"version":3,"sources":["/Users/manx/projects-2/bitsjournal/frontend/components/Stripe/CheckoutForm.js"],"names":["React","injectStripe","CardElement","ApolloConsumer","gql","styled","Button","FormWrapper","smallFont","register","removeArgumentsFromDocument","Router","Cookie","require","CheckoutForm","stripe","handleSubmit","ev","client","preventDefault","source","uid","get","createSource","type","owner","email","then","id","toString","mutate","mutation","variables","res","set","push","marginTop","e","width","base","fontSize","display","NoteDiv","div","StyledForm","form","props","loading","SubmitButton","InputWrapper"],"mappings":"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","sourcesContent":["// CheckoutForm.js\nimport React from \"react\";\nimport { injectStripe, CardElement } from \"react-stripe-elements\";\nimport { ApolloConsumer } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components\";\nimport Button from \"../shared/Button\";\nimport FormWrapper from \"../form/FormWrapper\";\nimport { smallFont } from \"../shared/helpers\";\nimport register from \"../../pages/register\";\nimport { removeArgumentsFromDocument } from \"apollo-utilities\";\nimport Router from \"next/router\";\nconst Cookie = require(\"js-cookie\");\n\nfunction CheckoutForm({ stripe }) {\n  function handleSubmit(ev, client) {\n    ev.preventDefault();\n    let source;\n    let uid = Cookie.get(\"uid\");\n    stripe\n      .createSource({\n        type: \"card\",\n        owner: { email: \"jacobzadelman@gmail.com\" },\n      })\n      .then(({ source }) => {\n        return source.id.toString();\n      })\n      .then(async (source) => {\n        await client\n          .mutate({\n            mutation: gql`\n              mutation confCard($uid: String!, $source: String!) {\n                confirmCard(uid: $uid, source: $source)\n              }\n            `,\n            variables: { uid, source },\n          })\n          .then((res) => {\n            Cookie.set(\"isAuth\", \"true\");\n            Router.push(\"/dashboard\");\n          });\n      });\n  }\n\n  return (\n    <ApolloConsumer>\n      {(client) => (\n        <FormWrapper style={{ marginTop: \"20vw\" }}>\n          <StyledForm onSubmit={(e) => handleSubmit(e, client)}>\n            <label style={{ width: \"100%\" }}>\n              <CardElement style={{ base: { fontSize: \"18px\" } }} />\n            </label>\n            <div style={{ display: \"flex\", width: \"100%\" }}>\n              <SubmitButton>Start your free trial</SubmitButton>\n            </div>\n            <div style={{ display: \"flex\", width: \"100%\" }}>\n              <NoteDiv>*free for 7 days then $29USD/month</NoteDiv>\n            </div>\n          </StyledForm>\n        </FormWrapper>\n      )}\n    </ApolloConsumer>\n  );\n}\n\nexport default injectStripe(CheckoutForm);\n\nconst NoteDiv = styled.div`\n  ${smallFont}\n  font-size: 11px;\n  margin: auto;\n  margin-top: 7px;\n`;\n\nconst StyledForm = styled.form`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  width: 100%;\n  ${(props) =>\n    props.loading &&\n    \"filter: grayscale(0.5) blur(5px) opacity(0.6); pointer-events: none\"};\n`;\n\nconst SubmitButton = styled(Button)`\n  margin: auto;\n  margin-top: 20px;\n  background-color: #333333;\n`;\n\nconst InputWrapper = styled.div`\n  position: relative;\n  margin-bottom: 24px;\n  width: 100%;\n`;\n"]},"metadata":{},"sourceType":"module"}