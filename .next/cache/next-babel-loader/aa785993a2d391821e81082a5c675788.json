{"ast":null,"code":"var _jsxFileName = \"/Users/manx/projects-2/bitsjournal/frontend/components/Stripe/CheckoutForm.js\";\nvar __jsx = React.createElement;\n// CheckoutForm.js\nimport React from \"react\";\nimport { injectStripe, CardElement } from \"react-stripe-elements\";\nimport { ApolloConsumer } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components\";\nimport Button from \"../shared/Button\";\nimport FormWrapper from \"../form/FormWrapper\";\nimport { smallFont } from \"../shared/helpers\";\nimport register from \"../../pages/register\";\nimport { removeArgumentsFromDocument } from \"apollo-utilities\";\nimport Router from \"next/router\";\n\nconst Cookie = require(\"js-cookie\");\n\nfunction CheckoutForm({\n  stripe\n}) {\n  function handleSubmit(ev, client) {\n    ev.preventDefault();\n    let source;\n    let uid = Cookie.get(\"uid\");\n    stripe.createSource({\n      type: \"card\",\n      owner: {\n        email: \"jacobzadelman@gmail.com\"\n      }\n    }).then(({\n      source\n    }) => {\n      return source.id.toString();\n    }).then(async source => {\n      await client.mutate({\n        mutation: gql`\n              mutation confCard($uid: String!, $source: String!) {\n                confirmCard(uid: $uid, source: $source)\n              }\n            `,\n        variables: {\n          uid,\n          source\n        }\n      }).then(res => {\n        Cookie.set(\"isAuth\", \"true\");\n        Router.push(\"/dashboard\");\n      });\n    });\n  }\n\n  return __jsx(ApolloConsumer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, client => __jsx(FormWrapper, {\n    style: {\n      marginTop: \"20vw\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, __jsx(StyledForm, {\n    onSubmit: e => handleSubmit(e, client),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }, __jsx(\"label\", {\n    style: {\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, __jsx(CardElement, {\n    style: {\n      base: {\n        fontSize: \"18px\"\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, __jsx(SubmitButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 15\n    }\n  }, \"Start your free trial\")), __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, __jsx(NoteDiv, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 15\n    }\n  }, \"*free for 7 days then $29USD/month\")))));\n}\n\nexport default injectStripe(CheckoutForm);\nconst NoteDiv = styled.div.withConfig({\n  displayName: \"CheckoutForm__NoteDiv\",\n  componentId: \"sc-53t4o-0\"\n})([\"\", \" font-size:11px;margin:auto;margin-top:7px;\"], smallFont);\nconst StyledForm = styled.form.withConfig({\n  displayName: \"CheckoutForm__StyledForm\",\n  componentId: \"sc-53t4o-1\"\n})([\"display:flex;flex-direction:column;align-items:flex-start;width:100%;\", \";\"], props => props.loading && \"filter: grayscale(0.5) blur(5px) opacity(0.6); pointer-events: none\");\nconst SubmitButton = styled(Button).withConfig({\n  displayName: \"CheckoutForm__SubmitButton\",\n  componentId: \"sc-53t4o-2\"\n})([\"margin:auto;margin-top:20px;background-color:#333333;\"]);\nconst InputWrapper = styled.div.withConfig({\n  displayName: \"CheckoutForm__InputWrapper\",\n  componentId: \"sc-53t4o-3\"\n})([\"position:relative;margin-bottom:24px;width:100%;\"]);","map":{"version":3,"sources":["/Users/manx/projects-2/bitsjournal/frontend/components/Stripe/CheckoutForm.js"],"names":["React","injectStripe","CardElement","ApolloConsumer","gql","styled","Button","FormWrapper","smallFont","register","removeArgumentsFromDocument","Router","Cookie","require","CheckoutForm","stripe","handleSubmit","ev","client","preventDefault","source","uid","get","createSource","type","owner","email","then","id","toString","mutate","mutation","variables","res","set","push","marginTop","e","width","base","fontSize","display","NoteDiv","div","StyledForm","form","props","loading","SubmitButton","InputWrapper"],"mappings":"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","sourcesContent":["// CheckoutForm.js\nimport React from \"react\";\nimport { injectStripe, CardElement } from \"react-stripe-elements\";\nimport { ApolloConsumer } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components\";\nimport Button from \"../shared/Button\";\nimport FormWrapper from \"../form/FormWrapper\";\nimport { smallFont } from \"../shared/helpers\";\nimport register from \"../../pages/register\";\nimport { removeArgumentsFromDocument } from \"apollo-utilities\";\nimport Router from \"next/router\";\nconst Cookie = require(\"js-cookie\");\n\nfunction CheckoutForm({ stripe }) {\n  function handleSubmit(ev, client) {\n    ev.preventDefault();\n    let source;\n    let uid = Cookie.get(\"uid\");\n    stripe\n      .createSource({\n        type: \"card\",\n        owner: { email: \"jacobzadelman@gmail.com\" },\n      })\n      .then(({ source }) => {\n        return source.id.toString();\n      })\n      .then(async (source) => {\n        await client\n          .mutate({\n            mutation: gql`\n              mutation confCard($uid: String!, $source: String!) {\n                confirmCard(uid: $uid, source: $source)\n              }\n            `,\n            variables: { uid, source },\n          })\n          .then((res) => {\n            Cookie.set(\"isAuth\", \"true\");\n            Router.push(\"/dashboard\");\n          });\n      });\n  }\n\n  return (\n    <ApolloConsumer>\n      {(client) => (\n        <FormWrapper style={{ marginTop: \"20vw\" }}>\n          <StyledForm onSubmit={(e) => handleSubmit(e, client)}>\n            <label style={{ width: \"100%\" }}>\n              <CardElement style={{ base: { fontSize: \"18px\" } }} />\n            </label>\n            <div style={{ display: \"flex\", width: \"100%\" }}>\n              <SubmitButton>Start your free trial</SubmitButton>\n            </div>\n            <div style={{ display: \"flex\", width: \"100%\" }}>\n              <NoteDiv>*free for 7 days then $29USD/month</NoteDiv>\n            </div>\n          </StyledForm>\n        </FormWrapper>\n      )}\n    </ApolloConsumer>\n  );\n}\n\nexport default injectStripe(CheckoutForm);\n\nconst NoteDiv = styled.div`\n  ${smallFont}\n  font-size: 11px;\n  margin: auto;\n  margin-top: 7px;\n`;\n\nconst StyledForm = styled.form`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  width: 100%;\n  ${(props) =>\n    props.loading &&\n    \"filter: grayscale(0.5) blur(5px) opacity(0.6); pointer-events: none\"};\n`;\n\nconst SubmitButton = styled(Button)`\n  margin: auto;\n  margin-top: 20px;\n  background-color: #333333;\n`;\n\nconst InputWrapper = styled.div`\n  position: relative;\n  margin-bottom: 24px;\n  width: 100%;\n`;\n"]},"metadata":{},"sourceType":"module"}