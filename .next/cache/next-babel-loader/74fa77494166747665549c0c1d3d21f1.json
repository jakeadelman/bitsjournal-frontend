{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { format } from \"d3-format\";\nimport { timeFormat } from \"d3-time-format\";\nimport { ChartCanvas, Chart } from \"react-stockcharts\";\nimport { CandlestickSeries, LineSeries } from \"react-stockcharts/lib/series\";\nimport { XAxis, YAxis } from \"react-stockcharts/lib/axes\";\nimport { CrossHairCursor, EdgeIndicator, CurrentCoordinate, MouseCoordinateX, MouseCoordinateY } from \"react-stockcharts/lib/coordinates\";\nimport { timeCompare, getYRangeNums, findYValBuy, findYValSell } from \"./helpers\";\nimport { LabelAnnotation, Label, Annotate } from \"react-stockcharts/lib/annotation\";\nimport { discontinuousTimeScaleProvider } from \"react-stockcharts/lib/scale\";\nimport { OHLCTooltip, MovingAverageTooltip } from \"react-stockcharts/lib/tooltip\";\nimport { ema } from \"react-stockcharts/lib/indicator\";\nimport { fitWidth } from \"react-stockcharts/lib/helper\";\nimport { last } from \"react-stockcharts/lib/utils\";\n\nvar CandleStickChartWithAnnotation = /*#__PURE__*/function (_React$Component) {\n  _inherits(CandleStickChartWithAnnotation, _React$Component);\n\n  var _super = _createSuper(CandleStickChartWithAnnotation);\n\n  function CandleStickChartWithAnnotation(props) {\n    _classCallCheck(this, CandleStickChartWithAnnotation);\n\n    return _super.call(this, props);\n  }\n\n  _createClass(CandleStickChartWithAnnotation, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var yRangeNums = getYRangeNums(this.props.data);\n      this.setState({\n        yRangeNums: yRangeNums\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var margin = {\n        left: 20,\n        right: 50,\n        top: 30,\n        bottom: 30\n      };\n      var height = 400;\n      var _this$props = this.props,\n          type = _this$props.type,\n          width = _this$props.width,\n          ratio = _this$props.ratio,\n          initialData = _this$props.data;\n      var yAxisLabelX = width - margin.left - 40,\n          yAxisLabelY = (height - margin.top - margin.bottom) / 2;\n      var xScaleProvider = discontinuousTimeScaleProvider.inputDateAccessor(function (d) {\n        return d.date;\n      });\n\n      var _xScaleProvider = xScaleProvider(initialData),\n          data = _xScaleProvider.data,\n          xScale = _xScaleProvider.xScale,\n          xAccessor = _xScaleProvider.xAccessor,\n          displayXAccessor = _xScaleProvider.displayXAccessor;\n\n      var start = xAccessor(last(data));\n      var end = xAccessor(data[Math.max(0, data.length - 150)]);\n      var xExtents = [start, end];\n\n      if (this.state == null) {\n        return __jsx(\"div\", null, \"Loading...\");\n      } // try {\n\n\n      return __jsx(ChartCanvas, {\n        height: height,\n        ratio: ratio,\n        width: width,\n        margin: margin,\n        type: type,\n        data: data,\n        xScale: xScale,\n        seriesName: \"BTC\",\n        xAccessor: xAccessor,\n        displayXAccessor: displayXAccessor,\n        xExtents: xExtents\n      }, __jsx(Chart, {\n        id: 1,\n        yExtents: [function (d) {\n          return [d.high, d.low];\n        }],\n        padding: {\n          top: 80,\n          bottom: 80\n        }\n      }, __jsx(XAxis, {\n        axisAt: \"bottom\",\n        orient: \"bottom\"\n      }), __jsx(MouseCoordinateX, {\n        at: \"bottom\",\n        orient: \"bottom\",\n        displayFormat: timeFormat(\"%Y-%m-%d\")\n      }), __jsx(MouseCoordinateY, {\n        at: \"right\",\n        orient: \"right\",\n        displayFormat: format(\".2f\")\n      }), __jsx(YAxis, {\n        axisAt: \"right\",\n        orient: \"right\",\n        ticks: 5\n      }), __jsx(CandlestickSeries, null), __jsx(OHLCTooltip, {\n        origin: [-10, 0]\n      }), this.props.trades.map(function (each) {\n        // console.log(\n        //   \"mapping total length\" + this.props.trades.length.toString(),\n        //   each\n        // );\n        var datu = new Date(each.timestamp); // console.log(datu, this.props.timeframe);\n\n        if (each.side == \"Buy\") {\n          var annotationPropsUp = {\n            fontFamily: \"Glyphicons Halflings\",\n            fontSize: 15,\n            fill: \"#018001\",\n            // fill: rgba(1, 128, 1, 0.5),\n            opacity: 0.8,\n            text: \"▲\",\n            y: function y(_ref) {\n              var yScale = _ref.yScale;\n              return yScale.range()[0] + 20; // return findYValBuy(\n              //   this.state.yRangeNums[0],\n              //   this.state.yRangeNums[1],\n              //   each.price\n              // );\n            },\n            onClick: console.log.bind(console),\n            tooltip: function tooltip(d) {\n              return timeFormat(\"%B\")(d.date);\n            } // onMouseOver: console.log.bind(console),\n\n          };\n          return __jsx(Annotate, {\n            \"with\": LabelAnnotation,\n            when: function when(d) {\n              return timeCompare(d, datu, _this.props.timeframe);\n            },\n            usingProps: annotationPropsUp\n          });\n        } else if (each.side == \"Sell\") {\n          var annotationPropsDown = {\n            fontFamily: \"Glyphicons Halflings\",\n            fontSize: 15,\n            fill: \"#FF0000\",\n            opacity: 0.8,\n            text: \"▼\",\n            y: function y(_ref2) {\n              var yScale = _ref2.yScale;\n              return yScale.range()[1] - 20; // return findYValSell(\n              //   this.state.yRangeNums[0],\n              //   this.state.yRangeNums[1],\n              //   each.price\n              // );\n            },\n            onClick: console.log.bind(console),\n            tooltip: function tooltip(d) {\n              return timeFormat(\"%B\")(d.date);\n            } // onMouseOver: console.log.bind(console),\n\n          };\n          return __jsx(Annotate, {\n            \"with\": LabelAnnotation,\n            when: function when(d) {\n              return timeCompare(d, datu, _this.props.timeframe);\n            },\n            usingProps: annotationPropsDown\n          });\n        } else {\n          return;\n        }\n      })), __jsx(CrossHairCursor, {\n        strokeDasharray: \"LongDashDot\"\n      })); // } catch (err) {\n      //   return <div>no chart</div>;\n      // }\n    }\n  }]);\n\n  return CandleStickChartWithAnnotation;\n}(React.Component);\n\nCandleStickChartWithAnnotation.propTypes = {\n  data: PropTypes.array.isRequired,\n  width: PropTypes.number.isRequired,\n  ratio: PropTypes.number.isRequired,\n  type: PropTypes.oneOf([\"svg\", \"hybrid\"]).isRequired\n};\nCandleStickChartWithAnnotation.defaultProps = {\n  type: \"svg\"\n};\nCandleStickChartWithAnnotation = fitWidth(CandleStickChartWithAnnotation);\nexport default CandleStickChartWithAnnotation;","map":{"version":3,"sources":["/Users/manx/projects-2/bitsjournal/frontend/components/Dashboard/Chart/ChartDemo.js"],"names":["React","PropTypes","format","timeFormat","ChartCanvas","Chart","CandlestickSeries","LineSeries","XAxis","YAxis","CrossHairCursor","EdgeIndicator","CurrentCoordinate","MouseCoordinateX","MouseCoordinateY","timeCompare","getYRangeNums","findYValBuy","findYValSell","LabelAnnotation","Label","Annotate","discontinuousTimeScaleProvider","OHLCTooltip","MovingAverageTooltip","ema","fitWidth","last","CandleStickChartWithAnnotation","props","yRangeNums","data","setState","margin","left","right","top","bottom","height","type","width","ratio","initialData","yAxisLabelX","yAxisLabelY","xScaleProvider","inputDateAccessor","d","date","xScale","xAccessor","displayXAccessor","start","end","Math","max","length","xExtents","state","high","low","trades","map","each","datu","Date","timestamp","side","annotationPropsUp","fontFamily","fontSize","fill","opacity","text","y","yScale","range","onClick","console","log","bind","tooltip","timeframe","annotationPropsDown","Component","propTypes","array","isRequired","number","oneOf","defaultProps"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,SAASC,MAAT,QAAuB,WAAvB;AACA,SAASC,UAAT,QAA2B,gBAA3B;AAEA,SAASC,WAAT,EAAsBC,KAAtB,QAAmC,mBAAnC;AACA,SAASC,iBAAT,EAA4BC,UAA5B,QAA8C,8BAA9C;AACA,SAASC,KAAT,EAAgBC,KAAhB,QAA6B,4BAA7B;AACA,SACEC,eADF,EAEEC,aAFF,EAGEC,iBAHF,EAIEC,gBAJF,EAKEC,gBALF,QAMO,mCANP;AAOA,SACEC,WADF,EAEEC,aAFF,EAGEC,WAHF,EAIEC,YAJF,QAKO,WALP;AAOA,SACEC,eADF,EAEEC,KAFF,EAGEC,QAHF,QAIO,kCAJP;AAKA,SAASC,8BAAT,QAA+C,6BAA/C;AACA,SACEC,WADF,EAEEC,oBAFF,QAGO,+BAHP;AAIA,SAASC,GAAT,QAAoB,iCAApB;AACA,SAASC,QAAT,QAAyB,8BAAzB;AACA,SAASC,IAAT,QAAqB,6BAArB;;IAEMC,8B;;;;;AACJ,0CAAYC,KAAZ,EAAmB;AAAA;;AAAA,6BACXA,KADW;AAElB;;;;wCACmB;AAClB,UAAIC,UAAU,GAAGd,aAAa,CAAC,KAAKa,KAAL,CAAWE,IAAZ,CAA9B;AACA,WAAKC,QAAL,CAAc;AAAEF,QAAAA,UAAU,EAAEA;AAAd,OAAd;AACD;;;6BACQ;AAAA;;AACP,UAAMG,MAAM,GAAG;AAAEC,QAAAA,IAAI,EAAE,EAAR;AAAYC,QAAAA,KAAK,EAAE,EAAnB;AAAuBC,QAAAA,GAAG,EAAE,EAA5B;AAAgCC,QAAAA,MAAM,EAAE;AAAxC,OAAf;AACA,UAAMC,MAAM,GAAG,GAAf;AAFO,wBAG2C,KAAKT,KAHhD;AAAA,UAGCU,IAHD,eAGCA,IAHD;AAAA,UAGOC,KAHP,eAGOA,KAHP;AAAA,UAGcC,KAHd,eAGcA,KAHd;AAAA,UAG2BC,WAH3B,eAGqBX,IAHrB;AAAA,UAKAY,WALA,GAMLH,KAAK,GAAGP,MAAM,CAACC,IAAf,GAAsB,EANjB;AAAA,UAKaU,WALb,GAOL,CAACN,MAAM,GAAGL,MAAM,CAACG,GAAhB,GAAsBH,MAAM,CAACI,MAA9B,IAAwC,CAPnC;AAUP,UAAMQ,cAAc,GAAGvB,8BAA8B,CAACwB,iBAA/B,CACrB,UAACC,CAAD;AAAA,eAAOA,CAAC,CAACC,IAAT;AAAA,OADqB,CAAvB;;AAVO,4BAa+CH,cAAc,CAClEH,WADkE,CAb7D;AAAA,UAaCX,IAbD,mBAaCA,IAbD;AAAA,UAaOkB,MAbP,mBAaOA,MAbP;AAAA,UAaeC,SAbf,mBAaeA,SAbf;AAAA,UAa0BC,gBAb1B,mBAa0BA,gBAb1B;;AAiBP,UAAMC,KAAK,GAAGF,SAAS,CAACvB,IAAI,CAACI,IAAD,CAAL,CAAvB;AACA,UAAMsB,GAAG,GAAGH,SAAS,CAACnB,IAAI,CAACuB,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYxB,IAAI,CAACyB,MAAL,GAAc,GAA1B,CAAD,CAAL,CAArB;AACA,UAAMC,QAAQ,GAAG,CAACL,KAAD,EAAQC,GAAR,CAAjB;;AAEA,UAAI,KAAKK,KAAL,IAAc,IAAlB,EAAwB;AACtB,eAAO,gCAAP;AACD,OAvBM,CAwBP;;;AACA,aACE,MAAC,WAAD;AACE,QAAA,MAAM,EAAEpB,MADV;AAEE,QAAA,KAAK,EAAEG,KAFT;AAGE,QAAA,KAAK,EAAED,KAHT;AAIE,QAAA,MAAM,EAAEP,MAJV;AAKE,QAAA,IAAI,EAAEM,IALR;AAME,QAAA,IAAI,EAAER,IANR;AAOE,QAAA,MAAM,EAAEkB,MAPV;AAQE,QAAA,UAAU,EAAC,KARb;AASE,QAAA,SAAS,EAAEC,SATb;AAUE,QAAA,gBAAgB,EAAEC,gBAVpB;AAWE,QAAA,QAAQ,EAAEM;AAXZ,SAaE,MAAC,KAAD;AACE,QAAA,EAAE,EAAE,CADN;AAEE,QAAA,QAAQ,EAAE,CAAC,UAACV,CAAD;AAAA,iBAAO,CAACA,CAAC,CAACY,IAAH,EAASZ,CAAC,CAACa,GAAX,CAAP;AAAA,SAAD,CAFZ;AAGE,QAAA,OAAO,EAAE;AAAExB,UAAAA,GAAG,EAAE,EAAP;AAAWC,UAAAA,MAAM,EAAE;AAAnB;AAHX,SAKE,MAAC,KAAD;AAAO,QAAA,MAAM,EAAC,QAAd;AAAuB,QAAA,MAAM,EAAC;AAA9B,QALF,EAME,MAAC,gBAAD;AACE,QAAA,EAAE,EAAC,QADL;AAEE,QAAA,MAAM,EAAC,QAFT;AAGE,QAAA,aAAa,EAAElC,UAAU,CAAC,UAAD;AAH3B,QANF,EAWE,MAAC,gBAAD;AACE,QAAA,EAAE,EAAC,OADL;AAEE,QAAA,MAAM,EAAC,OAFT;AAGE,QAAA,aAAa,EAAED,MAAM,CAAC,KAAD;AAHvB,QAXF,EAgBE,MAAC,KAAD;AAAO,QAAA,MAAM,EAAC,OAAd;AAAsB,QAAA,MAAM,EAAC,OAA7B;AAAqC,QAAA,KAAK,EAAE;AAA5C,QAhBF,EAiBE,MAAC,iBAAD,OAjBF,EAkBE,MAAC,WAAD;AAAa,QAAA,MAAM,EAAE,CAAC,CAAC,EAAF,EAAM,CAAN;AAArB,QAlBF,EAmBG,KAAK2B,KAAL,CAAWgC,MAAX,CAAkBC,GAAlB,CAAsB,UAACC,IAAD,EAAU;AAC/B;AACA;AACA;AACA;AACA,YAAIC,IAAI,GAAG,IAAIC,IAAJ,CAASF,IAAI,CAACG,SAAd,CAAX,CAL+B,CAM/B;;AACA,YAAIH,IAAI,CAACI,IAAL,IAAa,KAAjB,EAAwB;AACtB,cAAMC,iBAAiB,GAAG;AACxBC,YAAAA,UAAU,EAAE,sBADY;AAExBC,YAAAA,QAAQ,EAAE,EAFc;AAGxBC,YAAAA,IAAI,EAAE,SAHkB;AAIxB;AACAC,YAAAA,OAAO,EAAE,GALe;AAMxBC,YAAAA,IAAI,EAAE,GANkB;AAOxBC,YAAAA,CAAC,EAAE,iBAAgB;AAAA,kBAAbC,MAAa,QAAbA,MAAa;AACjB,qBAAOA,MAAM,CAACC,KAAP,GAAe,CAAf,IAAoB,EAA3B,CADiB,CAEjB;AACA;AACA;AACA;AACA;AACD,aAduB;AAexBC,YAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,IAAZ,CAAiBF,OAAjB,CAfe;AAgBxBG,YAAAA,OAAO,EAAE,iBAAClC,CAAD;AAAA,qBAAO5C,UAAU,CAAC,IAAD,CAAV,CAAiB4C,CAAC,CAACC,IAAnB,CAAP;AAAA,aAhBe,CAiBxB;;AAjBwB,WAA1B;AAoBA,iBACE,MAAC,QAAD;AACE,oBAAM7B,eADR;AAEE,YAAA,IAAI,EAAE,cAAC4B,CAAD;AAAA,qBAAOhC,WAAW,CAACgC,CAAD,EAAIiB,IAAJ,EAAU,KAAI,CAACnC,KAAL,CAAWqD,SAArB,CAAlB;AAAA,aAFR;AAGE,YAAA,UAAU,EAAEd;AAHd,YADF;AAOD,SA5BD,MA4BO,IAAIL,IAAI,CAACI,IAAL,IAAa,MAAjB,EAAyB;AAC9B,cAAMgB,mBAAmB,GAAG;AAC1Bd,YAAAA,UAAU,EAAE,sBADc;AAE1BC,YAAAA,QAAQ,EAAE,EAFgB;AAG1BC,YAAAA,IAAI,EAAE,SAHoB;AAI1BC,YAAAA,OAAO,EAAE,GAJiB;AAK1BC,YAAAA,IAAI,EAAE,GALoB;AAM1BC,YAAAA,CAAC,EAAE,kBAAgB;AAAA,kBAAbC,MAAa,SAAbA,MAAa;AACjB,qBAAOA,MAAM,CAACC,KAAP,GAAe,CAAf,IAAoB,EAA3B,CADiB,CAEjB;AACA;AACA;AACA;AACA;AACD,aAbyB;AAc1BC,YAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,IAAZ,CAAiBF,OAAjB,CAdiB;AAe1BG,YAAAA,OAAO,EAAE,iBAAClC,CAAD;AAAA,qBAAO5C,UAAU,CAAC,IAAD,CAAV,CAAiB4C,CAAC,CAACC,IAAnB,CAAP;AAAA,aAfiB,CAgB1B;;AAhB0B,WAA5B;AAkBA,iBACE,MAAC,QAAD;AACE,oBAAM7B,eADR;AAEE,YAAA,IAAI,EAAE,cAAC4B,CAAD;AAAA,qBAAOhC,WAAW,CAACgC,CAAD,EAAIiB,IAAJ,EAAU,KAAI,CAACnC,KAAL,CAAWqD,SAArB,CAAlB;AAAA,aAFR;AAGE,YAAA,UAAU,EAAEC;AAHd,YADF;AAOD,SA1BM,MA0BA;AACL;AACD;AACF,OAhEA,CAnBH,CAbF,EAkGE,MAAC,eAAD;AAAiB,QAAA,eAAe,EAAC;AAAjC,QAlGF,CADF,CAzBO,CA+HP;AACA;AACA;AACD;;;;EA1I0CnF,KAAK,CAACoF,S;;AA6InDxD,8BAA8B,CAACyD,SAA/B,GAA2C;AACzCtD,EAAAA,IAAI,EAAE9B,SAAS,CAACqF,KAAV,CAAgBC,UADmB;AAEzC/C,EAAAA,KAAK,EAAEvC,SAAS,CAACuF,MAAV,CAAiBD,UAFiB;AAGzC9C,EAAAA,KAAK,EAAExC,SAAS,CAACuF,MAAV,CAAiBD,UAHiB;AAIzChD,EAAAA,IAAI,EAAEtC,SAAS,CAACwF,KAAV,CAAgB,CAAC,KAAD,EAAQ,QAAR,CAAhB,EAAmCF;AAJA,CAA3C;AAOA3D,8BAA8B,CAAC8D,YAA/B,GAA8C;AAC5CnD,EAAAA,IAAI,EAAE;AADsC,CAA9C;AAIAX,8BAA8B,GAAGF,QAAQ,CAACE,8BAAD,CAAzC;AAEA,eAAeA,8BAAf","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { format } from \"d3-format\";\nimport { timeFormat } from \"d3-time-format\";\n\nimport { ChartCanvas, Chart } from \"react-stockcharts\";\nimport { CandlestickSeries, LineSeries } from \"react-stockcharts/lib/series\";\nimport { XAxis, YAxis } from \"react-stockcharts/lib/axes\";\nimport {\n  CrossHairCursor,\n  EdgeIndicator,\n  CurrentCoordinate,\n  MouseCoordinateX,\n  MouseCoordinateY,\n} from \"react-stockcharts/lib/coordinates\";\nimport {\n  timeCompare,\n  getYRangeNums,\n  findYValBuy,\n  findYValSell,\n} from \"./helpers\";\n\nimport {\n  LabelAnnotation,\n  Label,\n  Annotate,\n} from \"react-stockcharts/lib/annotation\";\nimport { discontinuousTimeScaleProvider } from \"react-stockcharts/lib/scale\";\nimport {\n  OHLCTooltip,\n  MovingAverageTooltip,\n} from \"react-stockcharts/lib/tooltip\";\nimport { ema } from \"react-stockcharts/lib/indicator\";\nimport { fitWidth } from \"react-stockcharts/lib/helper\";\nimport { last } from \"react-stockcharts/lib/utils\";\n\nclass CandleStickChartWithAnnotation extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    let yRangeNums = getYRangeNums(this.props.data);\n    this.setState({ yRangeNums: yRangeNums });\n  }\n  render() {\n    const margin = { left: 20, right: 50, top: 30, bottom: 30 };\n    const height = 400;\n    const { type, width, ratio, data: initialData } = this.props;\n\n    const [yAxisLabelX, yAxisLabelY] = [\n      width - margin.left - 40,\n      (height - margin.top - margin.bottom) / 2,\n    ];\n\n    const xScaleProvider = discontinuousTimeScaleProvider.inputDateAccessor(\n      (d) => d.date\n    );\n    const { data, xScale, xAccessor, displayXAccessor } = xScaleProvider(\n      initialData\n    );\n\n    const start = xAccessor(last(data));\n    const end = xAccessor(data[Math.max(0, data.length - 150)]);\n    const xExtents = [start, end];\n\n    if (this.state == null) {\n      return <div>Loading...</div>;\n    }\n    // try {\n    return (\n      <ChartCanvas\n        height={height}\n        ratio={ratio}\n        width={width}\n        margin={margin}\n        type={type}\n        data={data}\n        xScale={xScale}\n        seriesName=\"BTC\"\n        xAccessor={xAccessor}\n        displayXAccessor={displayXAccessor}\n        xExtents={xExtents}\n      >\n        <Chart\n          id={1}\n          yExtents={[(d) => [d.high, d.low]]}\n          padding={{ top: 80, bottom: 80 }}\n        >\n          <XAxis axisAt=\"bottom\" orient=\"bottom\" />\n          <MouseCoordinateX\n            at=\"bottom\"\n            orient=\"bottom\"\n            displayFormat={timeFormat(\"%Y-%m-%d\")}\n          />\n          <MouseCoordinateY\n            at=\"right\"\n            orient=\"right\"\n            displayFormat={format(\".2f\")}\n          />\n          <YAxis axisAt=\"right\" orient=\"right\" ticks={5} />\n          <CandlestickSeries />\n          <OHLCTooltip origin={[-10, 0]} />\n          {this.props.trades.map((each) => {\n            // console.log(\n            //   \"mapping total length\" + this.props.trades.length.toString(),\n            //   each\n            // );\n            let datu = new Date(each.timestamp);\n            // console.log(datu, this.props.timeframe);\n            if (each.side == \"Buy\") {\n              const annotationPropsUp = {\n                fontFamily: \"Glyphicons Halflings\",\n                fontSize: 15,\n                fill: \"#018001\",\n                // fill: rgba(1, 128, 1, 0.5),\n                opacity: 0.8,\n                text: \"▲\",\n                y: ({ yScale }) => {\n                  return yScale.range()[0] + 20;\n                  // return findYValBuy(\n                  //   this.state.yRangeNums[0],\n                  //   this.state.yRangeNums[1],\n                  //   each.price\n                  // );\n                },\n                onClick: console.log.bind(console),\n                tooltip: (d) => timeFormat(\"%B\")(d.date),\n                // onMouseOver: console.log.bind(console),\n              };\n\n              return (\n                <Annotate\n                  with={LabelAnnotation}\n                  when={(d) => timeCompare(d, datu, this.props.timeframe)}\n                  usingProps={annotationPropsUp}\n                />\n              );\n            } else if (each.side == \"Sell\") {\n              const annotationPropsDown = {\n                fontFamily: \"Glyphicons Halflings\",\n                fontSize: 15,\n                fill: \"#FF0000\",\n                opacity: 0.8,\n                text: \"▼\",\n                y: ({ yScale }) => {\n                  return yScale.range()[1] - 20;\n                  // return findYValSell(\n                  //   this.state.yRangeNums[0],\n                  //   this.state.yRangeNums[1],\n                  //   each.price\n                  // );\n                },\n                onClick: console.log.bind(console),\n                tooltip: (d) => timeFormat(\"%B\")(d.date),\n                // onMouseOver: console.log.bind(console),\n              };\n              return (\n                <Annotate\n                  with={LabelAnnotation}\n                  when={(d) => timeCompare(d, datu, this.props.timeframe)}\n                  usingProps={annotationPropsDown}\n                />\n              );\n            } else {\n              return;\n            }\n          })}\n        </Chart>\n        <CrossHairCursor strokeDasharray=\"LongDashDot\" />\n      </ChartCanvas>\n    );\n    // } catch (err) {\n    //   return <div>no chart</div>;\n    // }\n  }\n}\n\nCandleStickChartWithAnnotation.propTypes = {\n  data: PropTypes.array.isRequired,\n  width: PropTypes.number.isRequired,\n  ratio: PropTypes.number.isRequired,\n  type: PropTypes.oneOf([\"svg\", \"hybrid\"]).isRequired,\n};\n\nCandleStickChartWithAnnotation.defaultProps = {\n  type: \"svg\",\n};\n\nCandleStickChartWithAnnotation = fitWidth(CandleStickChartWithAnnotation);\n\nexport default CandleStickChartWithAnnotation;\n"]},"metadata":{},"sourceType":"module"}