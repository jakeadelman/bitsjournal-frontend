{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n              mutation confCard($uid: String!, $source: String!) {\\n                confirmCard(uid: $uid, source: $source)\\n              }\\n            \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n// CheckoutForm.js\nimport React from \"react\";\nimport { injectStripe, CardElement } from \"react-stripe-elements\";\nimport { ApolloConsumer } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components\";\nimport Button from \"../shared/Button\";\nimport FormWrapper from \"../form/FormWrapper\";\nimport { smallFont } from \"../shared/helpers\";\nimport register from \"../../pages/register\";\nimport { removeArgumentsFromDocument } from \"apollo-utilities\";\nimport Router from \"next/router\";\n\nvar Cookie = require(\"js-cookie\");\n\nfunction CheckoutForm(_ref) {\n  var stripe = _ref.stripe;\n\n  function handleSubmit(ev, client) {\n    ev.preventDefault();\n    var source;\n    var uid = Cookie.get(\"uid\");\n    stripe.createSource({\n      type: \"card\",\n      owner: {\n        email: \"jacobzadelman@gmail.com\"\n      }\n    }).then(function (_ref2) {\n      var source = _ref2.source;\n      return source.id.toString();\n    }).then( /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(source) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return client.mutate({\n                  mutation: gql(_templateObject()),\n                  variables: {\n                    uid: uid,\n                    source: source\n                  }\n                }).then(function (res) {\n                  Cookie.set(\"isAuth\", \"true\");\n                  Router.push(\"/dashboard\");\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n  }\n\n  return __jsx(ApolloConsumer, null, function (client) {\n    return __jsx(FormWrapper, {\n      style: {\n        marginTop: \"20vw\"\n      }\n    }, __jsx(StyledForm, {\n      onSubmit: function onSubmit(e) {\n        return handleSubmit(e, client);\n      }\n    }, __jsx(\"label\", {\n      style: {\n        width: \"100%\"\n      }\n    }, __jsx(CardElement, {\n      style: {\n        base: {\n          fontSize: \"18px\"\n        }\n      }\n    })), __jsx(\"div\", {\n      style: {\n        display: \"flex\",\n        width: \"100%\"\n      }\n    }, __jsx(SubmitButton, null, \"Start your free trial\")), __jsx(\"div\", {\n      style: {\n        display: \"flex\",\n        width: \"100%\"\n      }\n    }, __jsx(NoteDiv, null, \"*free for 7 days then $29USD/month\"))));\n  });\n}\n\nexport default injectStripe(CheckoutForm);\nvar NoteDiv = styled.div.withConfig({\n  displayName: \"CheckoutForm__NoteDiv\",\n  componentId: \"sc-53t4o-0\"\n})([\"\", \" font-size:11px;margin:auto;margin-top:7px;\"], smallFont);\nvar StyledForm = styled.form.withConfig({\n  displayName: \"CheckoutForm__StyledForm\",\n  componentId: \"sc-53t4o-1\"\n})([\"display:flex;flex-direction:column;align-items:flex-start;width:100%;\", \";\"], function (props) {\n  return props.loading && \"filter: grayscale(0.5) blur(5px) opacity(0.6); pointer-events: none\";\n});\nvar SubmitButton = styled(Button).withConfig({\n  displayName: \"CheckoutForm__SubmitButton\",\n  componentId: \"sc-53t4o-2\"\n})([\"margin:auto;margin-top:20px;background-color:#333333;\"]);\nvar InputWrapper = styled.div.withConfig({\n  displayName: \"CheckoutForm__InputWrapper\",\n  componentId: \"sc-53t4o-3\"\n})([\"position:relative;margin-bottom:24px;width:100%;\"]);","map":null,"metadata":{},"sourceType":"module"}