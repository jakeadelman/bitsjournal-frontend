{"ast":null,"code":"var __jsx = React.createElement;\n// CheckoutForm.js\nimport React from \"react\";\nimport { injectStripe, CardElement } from \"react-stripe-elements\";\nimport { ApolloConsumer } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components\";\nimport Button from \"../shared/Button\";\nimport FormWrapper from \"../form/FormWrapper\";\nimport { smallFont } from \"../shared/helpers\";\nimport register from \"../../pages/register\";\nimport { removeArgumentsFromDocument } from \"apollo-utilities\";\nimport Router from \"next/router\";\n\nconst Cookie = require(\"js-cookie\");\n\nfunction CheckoutForm({\n  stripe\n}) {\n  function handleSubmit(ev, client) {\n    ev.preventDefault();\n    let source;\n    let uid = Cookie.get(\"uid\");\n    stripe.createSource({\n      type: \"card\",\n      owner: {\n        email: \"jacobzadelman@gmail.com\"\n      }\n    }).then(({\n      source\n    }) => {\n      return source.id.toString();\n    }).then(async source => {\n      await client.mutate({\n        mutation: gql`\n              mutation confCard($uid: String!, $source: String!) {\n                confirmCard(uid: $uid, source: $source)\n              }\n            `,\n        variables: {\n          uid,\n          source\n        }\n      }).then(res => {\n        Cookie.set(\"isAuth\", \"true\");\n        Router.push(\"/dashboard\");\n      });\n    });\n  }\n\n  return __jsx(ApolloConsumer, null, client => __jsx(FormWrapper, {\n    style: {\n      marginTop: \"20vw\"\n    }\n  }, __jsx(StyledForm, {\n    onSubmit: e => handleSubmit(e, client)\n  }, __jsx(\"label\", {\n    style: {\n      width: \"100%\"\n    }\n  }, __jsx(CardElement, {\n    style: {\n      base: {\n        fontSize: \"18px\"\n      }\n    }\n  })), __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      width: \"100%\"\n    }\n  }, __jsx(SubmitButton, null, \"Start your free trial\")), __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      width: \"100%\"\n    }\n  }, __jsx(NoteDiv, null, \"*free for 7 days then $29USD/month\")))));\n}\n\nexport default injectStripe(CheckoutForm);\nconst NoteDiv = styled.div.withConfig({\n  displayName: \"CheckoutForm__NoteDiv\",\n  componentId: \"sc-53t4o-0\"\n})([\"\", \" font-size:11px;margin:auto;margin-top:7px;\"], smallFont);\nconst StyledForm = styled.form.withConfig({\n  displayName: \"CheckoutForm__StyledForm\",\n  componentId: \"sc-53t4o-1\"\n})([\"display:flex;flex-direction:column;align-items:flex-start;width:100%;\", \";\"], props => props.loading && \"filter: grayscale(0.5) blur(5px) opacity(0.6); pointer-events: none\");\nconst SubmitButton = styled(Button).withConfig({\n  displayName: \"CheckoutForm__SubmitButton\",\n  componentId: \"sc-53t4o-2\"\n})([\"margin:auto;margin-top:20px;background-color:#333333;\"]);\nconst InputWrapper = styled.div.withConfig({\n  displayName: \"CheckoutForm__InputWrapper\",\n  componentId: \"sc-53t4o-3\"\n})([\"position:relative;margin-bottom:24px;width:100%;\"]);","map":null,"metadata":{},"sourceType":"module"}